<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieServer Documentation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #20242a;
            color: #ffffff;
        }

        .header {
            background-color: #008bff;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            margin: 0;
            font-size: 24px;
        }

        .main {
            display: flex;
        }

        .sidebar {
            width: 250px;
            background-color: #282d33;
            padding: 20px;
            box-sizing: border-box;
        }

        .sidebar h2 {
            color: #ffffff;
            font-size: 18px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            margin-bottom: 10px;
        }

        .sidebar ul li a {
            text-decoration: none;
            color: #ffffff;
        }

        .content {
            padding: 20px;
            flex: 1;
            box-sizing: border-box;
        }

        .content h2 {
            color: #ffffff;
            font-size: 24px;
            margin-top: 0;
        }

        .command-box {
            background-color: #333a40;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-family: monospace;
            color: #ffffff;
            position: relative;
        }

        .command-box:hover {
            cursor: pointer;
        }

        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #005a9c;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            opacity: 0;
            cursor: pointer;
            transition: opacity 0.2s ease-in-out;
        }

        .command-box:hover .copy-button {
            opacity: 1;
        }

        .copy-button:hover {
            background-color: #007bff;
        }

        a {
            text-decoration: none;
            color: #008bff;
            transition: color 0.2s ease-in-out;
        }

        .other {
            text-decoration: none;
            transition: color 0.2s ease-in-out;  
        }

        a:hover {
            color: #008cffda;
            text-decoration: underline;
        }

    .other:hover {
            text-decoration: underline;  
        }

        h4 {
            font-size: 18px;
        }

        /* Hide the hamburger menu by default on larger screens */
.hamburger-menu {
  display: none;
}

.sidebar {
    display: block;
}

/* Media query for small screens (phones) */
@media (max-width: 768px) {
    /* Hide the sidebar on small screens */
    .sidebar {
        display: none;
    }

    /* Show the hamburger menu on small screens */
    .hamburger-menu {
        display: block;
        background-color: #333;
        color: white;
        font-size: 30px;
        border: none;
        padding: 15px;
        cursor: pointer;
        position: absolute;
        top: 10px; /* Adjust this to provide some space from the top */
        left: 10px; /* Adjust this to ensure the button is away from the left edge */
        z-index: 20; /* Ensure it stays on top of other elements */
    }

    /* Modify the content layout for smaller screens */
    #content {
        margin-left: 0;
    }

    /* If necessary, add padding or margin to header to avoid overlap */
    .header {
        padding-top: 80px; /* Adjust this to give space for the hamburger menu */
    }
}

        
    </style>
</head>
<body>
    <div class="header">
        <h1>MovieServer Documentation</h1>
        <h1>Adding Movies to Stream</h1>
    </div>
    <div class="main">
        <button id="hamburger-menu" class="hamburger-menu">&#9776;</button>
        <div class="sidebar">
            <ul>
                <li class="other"><a href="/">Getting Started</a></li>
                <li><a href=""><b>Adding Movies to Stream</b></a></li>
            </ul>
        </div>
        <div class="content">
            <h1>Adding Movies to Stream</h1>
            <p><strong>Step 1: Installing Prerequisites</strong><br>
                Before starting the conversion process, you'll need to install <strong>FFmpeg</strong>, the software required for converting your videos into streaming formats (HLS and DASH). Here's how to install it on your system:
            </p>

            <h3>Installing FFmpeg on macOS/Linux</h3>
            <p>For macOS and Linux, you can install FFmpeg using the following commands:</p>
            <ul>
                <li><strong>On macOS</strong> (using Homebrew):
                    <div class="command-box">
                        <p id="code1">brew install ffmpeg</p>
                        <button class="copy-button" id="copy-button1" onclick="copyToClipboard('code1')">Copy to clipboard</button>
                    </div>
                </li>
                <li><strong>On Ubuntu/Linux</strong> (using APT):
                    <div class="command-box">
                        <p id="code2">sudo apt update && sudo apt install ffmpeg</p>
                        <button class="copy-button" id="copy-button2" onclick="copyToClipboard('code2')">Copy to clipboard</button>
                    </div>
                </li>
            </ul>

            <h3>Installing FFmpeg on Windows</h3>
            <p>For Windows, you need to manually download and install FFmpeg:</p>
            <ul>
                <li>Go to the official FFmpeg website: <a href="https://ffmpeg.org/download.html" target="_blank">FFmpeg Download</a></li>
                <li>Download the latest Windows build and extract the ZIP file.</li>
                <li>Add the FFmpeg bin directory to your system's PATH variable (e.g., `C:\ffmpeg\bin`).</li>
                <li>Verify the installation by running the following command in Command Prompt:
                    <div class="command-box">
                        <p id="code3">ffmpeg -version</p>
                        <button class="copy-button" id="copy-button3" onclick="copyToClipboard('code3')">Copy to clipboard</button>
                    </div>
                </li>
            </ul>

            <p><strong>Step 2: Converting Videos to HLS and DASH</strong><br>
                After installing FFmpeg, you can proceed with converting your videos into HLS and DASH formats, which are suitable for adaptive bitrate streaming.
            </p>

            <h3>Converting Video to HLS</h3>
            <p>HLS (HTTP Live Streaming) is a format that breaks your video into small `.ts` segments and an `.m3u8` playlist file. To convert your video into HLS format, follow the steps below:</p>
            <ul>
                <li>Navigate to the directory where your video is located.</li>
                <li>Run the following FFmpeg command to create HLS (replace <code>input.mp4</code> with your video file name). You can find more information in the <strong>stream.html</strong> file in the <strong>MovieServer</strong> directory.
                    <div class="command-box">
                        <p id="code4">ffmpeg -i input.mp4 -preset fast -g 50 -sc_threshold 0 -map 0 -f hls -hls_time 10 -hls_list_size 0 -hls_segment_filename "output%03d.ts" playlist.m3u8</p>
                        <button class="copy-button" id="copy-button4" onclick="copyToClipboard('code4')">Copy to clipboard</button>
                    </div>
                </li>
            </ul>

            <h3>Converting Video to DASH</h3>
            <p>DASH (Dynamic Adaptive Streaming over HTTP) is another format for adaptive bitrate streaming. You can convert your video into DASH using the following FFmpeg command:</p>
            <ul>
                <li>Run the following command to convert to DASH (replace <code>input.mp4</code> with your video file name). Check the <strong>stream.html</strong> file in the <strong>MovieServer</strong> directory for more details.
                    <div class="command-box">
                        <p id="code5">ffmpeg -i input.mp4 -map 0 -c:v libx264 -c:a aac -f dash -segment_time 10 -dash_segment_filename "segment_%05d.m4s" manifest.mpd</p>
                        <button class="copy-button" id="copy-button5" onclick="copyToClipboard('code5')">Copy to clipboard</button>
                    </div>
                </li>
            </ul>

            <p><strong>Step 3: Streaming Regular H.264 MP4 Files</strong><br>
                If you prefer to stream standard <strong>MP4</strong> files without conversion to HLS or DASH, simply serve the MP4 file over HTTP. Ensure your <strong>MovieServer</strong> is running and properly configured to serve static files. 
            </p>
            <p>Modify the <strong>stream.html</strong> file to point to your MP4 files in the MovieServer directory. Refer to the file for detailed instructions.</p>

            <p><strong>Step 4: Modifying the <code>stream.html</code> File</strong><br>
                The <strong>stream.html</strong> file in your <strong>MovieServer</strong> directory controls how the streams are presented. You'll need to modify this file to reference the correct format (HLS, DASH, or MP4) for your videos.
            </p>
            <ul>
                <li>Navigate to the <strong>MovieServer</strong> directory and open the <strong>stream.html</strong> file in a text editor.</li>
                <li>In <strong>stream.html</strong>, ensure that the <code>var hlsUrl = 'master.m3u8';</code> or <code>var mpdUrl = 'output.mpd';</code>> JavaScript points to the correct file as per your setup, or the <code>src=""</code> points to the correct MP4 file.</li>
            </ul>
        </div>
    </div>

    <script>
        function copyToClipboard(id) {
    var text = document.getElementById(id).innerText;
    navigator.clipboard.writeText(text).then(() => {
        // Try to find the copy button dynamically
        var copyBtn = document.getElementById('copy-button' + id.charAt(id.length - 1)); 
        
        if (copyBtn) {  // Check if the button exists before modifying it
            copyBtn.innerHTML = "<i>Copied</i>";
            setTimeout(function () {
                copyBtn.innerHTML = "Copy";
            }, 2000);
        }
    }).catch(err => {
        console.error("Failed to copy text: ", err);
    });
}

document.addEventListener('DOMContentLoaded', () => {
    const hamburgerMenu = document.getElementById('hamburger-menu');
    const sidebar = document.querySelector('.sidebar');

    // Ensure the elements exist before adding event listeners
    if (hamburgerMenu && sidebar) {
        hamburgerMenu.addEventListener('click', () => {
            // Toggle sidebar visibility
            if (sidebar.style.display === 'block') {
                sidebar.style.display = 'none';
            } else {
                sidebar.style.display = 'block';
            }
        });
    }
});

    </script>
</body>
</html>
